!function(e){e.fn.makeaform=function(a){var l,o,t,n,r,s,i=e.extend({token:null,secret:null,modal:!1,fields:{estado:[],"nível":[]}},a),m=function(a){r.removeClass("alert-success alert-info alert-danger");var s=e(this).find('input[notempty="true"]').filter(function(){var a=0===this.value.length;return a?e(this).parent().addClass("has-error"):e(this).parent().removeClass("has-error"),a});if(s.length<=0){var m=l.val(),f=o.val(),c=t.val(),u=n.val(),v={token:i.token,secret:i.secret,lead:{name:m,email:f,estado:c,"nível":u}};r.html("Enviando formulário...").addClass("alert-info").fadeIn(),e.ajax({method:"POST",url:"URL-SERVICE",data:v}).done(d).fail(p)}else r.fadeOut();return!1},d=function(){r.html("Formulário enviado com sucesso!").removeClass("alert-info").addClass("alert-success"),l.val(""),o.val("")},p=function(){r.html("Formulário indisponível, tente novamente mais tarde.").removeClass("alert-info").addClass("alert-danger")},f=function(e){e.preventDefault(),s.stop().fadeOut()},c=function(e){e.preventDefault(),s.stop().fadeIn()};return this.each(function(){var a=e("<form></form>",{"class":"makeaform__form container-fluid",on:{submit:m}});r=e("<div></div>",{"class":"alert makeaform__message"});var d=e("<div></div>",{"class":"makeaform__group form-group col-lg-12"}),p=e("<label></label>",{html:"Nome: ","for":"name","class":"control-label"});l=e("<input />",{type:"text",name:"name","class":"makeaform__input form-control",placeholder:"Seu nome",notempty:"true"}),d.append(p),d.append(l);var u=e("<div></div>",{"class":"makeaform__group form-group col-lg-12"}),v=e("<label></label>",{html:"E-mail: ","for":"email","class":"control-label"});o=e("<input />",{type:"email",name:"email","class":"makeaform__input form-control",placeholder:"Seu e-mail",notempty:"true"}),u.append(v),u.append(o);var h=e("<div></div>",{"class":"makeaform__group form-group col-lg-12"}),g=e("<label></label>",{html:"Estado: ","for":"state","class":"control-label"});if(t=e("<select />",{name:"state","class":"makeaform__input form-control"}),i.fields.estado.length>0)for(var _,b=0,k=i.fields.estado.length;k>b;b++)_=e("<option></option>",{html:i.fields.estado[b],value:i.fields.estado[b]}),t.append(_);h.append(g),h.append(t);var C=e("<div></div>",{"class":"makeaform__group form-group col-lg-12"}),x=e("<label></label>",{html:"Nível: ","for":"level","class":"control-label"});if(n=e("<select />",{name:"level","class":"makeaform__input form-control"}),i.fields.nível.length>0)for(var _,b=0,k=i.fields.nível.length;k>b;b++)_=e("<option></option>",{html:i.fields.nível[b],value:i.fields.nível[b]}),n.append(_);C.append(x),C.append(n);var y=e("<div></div>",{"class":"makeaform__group form-group col-lg-12"}),E=e("<button></button>",{type:"submit",name:"submit",html:"Enviar","class":"btn btn-default"});if(y.append(E),a.append(r),a.append(d),a.append(u),a.append(h),a.append(C),a.append(y),i.modal===!0){s=e("<div></div>",{"class":"makeaform__lightboxgroup"});var S=e("<div></div>",{"class":"makeaform__lightboxbackground",on:{click:f}}),I=e("<div></div>",{"class":"makeaform__lightboxcontent container-fluid"}),O=e("<a></a>",{"class":"makeaform__lightboxclose",html:"x",href:"#",on:{click:f}});s.append(S),I.append(O),I.append(a),s.append(I),e("body").append(s),e(this).on("click",c)}else e(this).html(a)}),this}}(jQuery);
